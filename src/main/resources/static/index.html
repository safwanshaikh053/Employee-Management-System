<!DOCTYPE html>
<html>
<head>
<title>Employee App</title>

<!-- BOOTSTRAP -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

<style>
body{
  background:#f4f6f9;
}
.container{
  margin-top:40px;
}
.card{
  box-shadow:0 4px 10px rgba(0,0,0,.1);
}
</style>

</head>
<body>

<div class="container">

<h2 class="text-center mb-4 text-primary">Employee Management System</h2>

<div class="card p-3">
  <div class="d-flex justify-content-between">
    <h5>Employee List</h5>
    <button class="btn btn-primary" onclick="getEmployees()">Load Employees</button>
  </div>

  <table class="table table-striped table-bordered mt-3">
    <thead class="table-dark">
      <tr>
        <th>ID</th>
        <th>Name</th>
        <th>Dept</th>
        <th>Salary</th>
        <th>Action</th>
      </tr>
    </thead>
    <tbody id="empTable"></tbody>
  </table>
</div>

<br>

<div class="card p-3">
  <h5>Add Employee</h5>

  <div class="row">
    
    <div class="col-md-3">
      <input class="form-control" id="empId" placeholder="Employee ID">
    </div>

    <div class="col-md-3">
      <input class="form-control" id="empName" placeholder="Employee Name">
    </div>

    <div class="col-md-3">
      <input class="form-control" id="dept" placeholder="Department No">
    </div>

    <div class="col-md-3">
      <input class="form-control" id="sal" placeholder="Salary">
    </div>

  </div>

  <button class="btn btn-success mt-3" onclick="saveEmployee()">Save Employee</button>
</div>

</div>

<script>

function getEmployees(){
 fetch("http://localhost:7070/emp")
 .then(res => res.json())
 .then(data => {
    let rows = "";
    data.forEach(e=>{
      rows += `
        <tr>
          <td>${e.empId}</td>
          <td>${e.empName}</td>
          <td>${e.deptno}</td>
          <td>${e.sal}</td>
          <td>
            <button class="btn btn-danger btn-sm" onclick="deleteEmp('${e.empId}')">
              Delete
            </button>
          </td>
        </tr>`;
    });
    document.getElementById("empTable").innerHTML = rows;
 });
}

function saveEmployee(){

 let emp = {
   empId: document.getElementById("empId").value,
   empName: document.getElementById("empName").value,
   deptno: document.getElementById("dept").value,
   sal: document.getElementById("sal").value
 };

 fetch("http://localhost:7070/empPost",{
   method:"POST",
   headers:{"Content-Type":"application/json"},
   body:JSON.stringify(emp)
 }).then(()=>{
   alert("Employee Added Successfully!");
   getEmployees();
 });
}

function deleteEmp(id){
 fetch(`http://localhost:7070/empDelete/${id}`,{
   method:"DELETE"
 }).then(()=>{
   alert("Employee Deleted");
   getEmployees();
 });
}

</script>

</body>
</html>
